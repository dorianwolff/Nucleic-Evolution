<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nucleic Evolution - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body::before {
            position: absolute;
            width: min(1400px, 90vw);
            top: 10%;
            left: 50%;
            height: 90%;
            transform: translateX(-50%);
            content: '';
            background-size: 100%;
            background-repeat: no-repeat;
            background-position: top center;
            pointer-events: none;
        }

        /* Add fade-out effect */
        .fade-out {
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }

        /* Transparency for inactive sections */
        .transparent {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
        }

        /* Margin between sections */
        section {
            margin-bottom: 4rem;
        }

        /* Full-page sections for scroll snapping */
        .scroll-page {
            height: 100vh;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            position: relative;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Adjust carousel and banner sections */
        .carousel {
            height: calc(100vh - 50vh); /* Adjust carousel height to half of the viewport */
            margin-bottom: 4rem; /* Add space between the first and second pages */
        }

        .banner {
            height: 100vh;
            padding-top: 4rem; /* Add padding to avoid overlap with the carousel */
        }

        /* Adjust featured products section to accommodate footer */
        .featured-products.scroll-page {
            height: calc(100vh - 4rem); /* Adjust height to include footer */
            margin-bottom: 0;
        }

        /* Make navbar sticky */
        #navbar-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background-color: rgba(47, 51, 55, 0.9); /* Slightly transparent background for navbar */
            transition: background-color 0.3s ease;
        }

        /* Ensure page content doesn't overlap with sticky navbar */
        body {
            padding-top: 60px; /* Adjust based on navbar height */
        }
    </style>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Navbar -->
<div id="navbar-container"></div>

<!-- Hero Section + Carousel (First Scroll Page) -->
<div class="scroll-page" id="page-1">
    <header class="hero-section bg-cover bg-center h-1/2" style="background-image: url('https://source.unsplash.com/random/1600x900?fantasy')">
        <div class="flex items-center justify-center h-full bg-opacity-50">
            <div class="text-center">
                <h1 class="text-5xl font-bold">Welcome to Nucleic Evolution</h1>
                <p class="mt-4">Discover a world of fantasy and conflict and collect your favorite cards and packs</p>
                <a href="shop.html" class="mt-6 inline-block py-2 px-4 rounded">Shop Now</a>
            </div>
        </div>
    </header>

    <!-- News Carousel -->
    <div class="carousel fade-out">
        <div class="carousel-slide active">
            <img src="Images/Evolution/pact2.webp" alt="News 1">
            <div class="carousel-content">
                <div>
                    <h2>New Products!</h2>
                    <p>New cards and new faction packs</p>
                </div>
            </div>
        </div>
        <div class="carousel-slide">
            <img src="Images/Evolution/immunity.webp" alt="News 2">
            <div class="carousel-content">
                <div>
                    <h2>New digital game on the way!</h2>
                    <p>A brand-new version of the game will be available digitally very shortly</p>
                </div>
            </div>
        </div>
        <div class="carousel-slide">
            <img src="Images/Evolution/lost_echo.webp" alt="News 3">
            <div class="carousel-content">
                <div>
                    <h2>Keep posted for new events!</h2>
                    <p>Share and subscribe to our YouTube channel!</p>
                </div>
            </div>
        </div>
        <div class="carousel-nav">
            <button id="prev">&#10094;</button>
            <button id="next">&#10095;</button>
        </div>
    </div>
</div>

<!-- Banner (Second Scroll Page) -->
<div class="banner fade-out scroll-page transparent" id="page-2">
    <div class="slider" style="--quantity: 10">
        <div class="item" style="--position: 1"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/106.png" alt=""></div>
        <div class="item" style="--position: 2"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/120.png" alt=""></div>
        <div class="item" style="--position: 3"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/053.png" alt=""></div>
        <div class="item" style="--position: 4"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/097.png" alt=""></div>
        <div class="item" style="--position: 5"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/080.png" alt=""></div>
        <div class="item" style="--position: 6"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/131.png" alt=""></div>
        <div class="item" style="--position: 7"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/115.png" alt=""></div>
        <div class="item" style="--position: 8"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/110.png" alt=""></div>
        <div class="item" style="--position: 9"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/100.png" alt=""></div>
        <div class="item" style="--position: 10"><img src="Individual_Cards/Nucleic_Evolution_1_pngs/fronts/090.png" alt=""></div>
    </div>
    <div class="content">
        <h1 data-content="Nucleic Evolution">
            Nucleic Evolution
        </h1>
        <div class="model"></div>
    </div>
</div>

<!-- Featured Products (Third Scroll Page) -->
<section class="featured-products container mx-auto px-6 py-8 fade-out scroll-page transparent" id="page-3">
    <h2 class="text-2xl font-bold">Featured Products</h2>
    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Card 1 -->
        <div class="card shadow-lg rounded-lg overflow-hidden">
            <a href="product.html?id=dinosaur-pack">
                <img class="w-full h-56 object-cover object-center" src="Images/Characters/dinosaurs/allausorus.webp" alt="Dinosaur Pack">
            </a>
            <div class="p-4">
                <h3 class="text-xl font-bold">Dinosaur Pack</h3>
                <p class="mt-2">The stomping has begun...</p>
                <div class="flex justify-between items-center mt-4">
                    <span class="font-bold">$5.00</span>
                    <a href="product.html?id=dinosaur-pack" class="hover:text-yellow-400">View Details</a>
                </div>
            </div>
        </div>
        <!-- Card 2 -->
        <div class="card shadow-lg rounded-lg overflow-hidden">
            <a href="product.html?id=harpy-pack">
                <img class="w-full h-56 object-cover object-center" src="Images/Characters/anime_harpies/Howl_harpy.webp" alt="Harpy Pack">
            </a>
            <div class="p-4">
                <h3 class="text-xl font-bold">Harpy Pack</h3>
                <p class="mt-2">Masters of the wind and sky</p>
                <div class="flex justify-between items-center mt-4">
                    <span class="font-bold">$5.00</span>
                    <a href="product.html?id=harpy-pack" class="hover:text-yellow-400">View Details</a>
                </div>
            </div>
        </div>
        <!-- Card 3 -->
        <div class="card shadow-lg rounded-lg overflow-hidden">
            <a href="product.html?id=undead-pack">
                <img class="w-full h-56 object-cover object-center" src="Images/Characters/anime_bonnies/dual_sword_undead.webp" alt="Undead Pack">
            </a>
            <div class="p-4">
                <h3 class="text-xl font-bold">Undead Pack</h3>
                <p class="mt-2">Arise, melodies of death and horror</p>
                <div class="flex justify-between items-center mt-4">
                    <span class="font-bold">$5.00</span>
                    <a href="product.html?id=undead-pack" class="hover:text-yellow-400">View Details</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-gray-800 mt-auto">
    <div class="container mx-auto px-6 py-4 text-center">
        <p>&copy; 2024 Nucleic Evolution. All rights reserved.</p>
    </div>
</footer>

<script>
    function updateCartCount() {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const cartCountElement = document.getElementById('cart-count');
        const itemCount = cart.reduce((total, item) => total + item.quantity, 0);
        if (itemCount > 0) {
            cartCountElement.textContent = itemCount > 9 ? '9+' : itemCount;
            cartCountElement.classList.remove('hidden');
        } else {
            cartCountElement.classList.add('hidden');
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        const navbarContainer = document.getElementById('navbar-container');
        fetch('navbar.html')
            .then(response => response.text())
            .then(data => {
                navbarContainer.innerHTML = data;
                // Highlight the active link
                const currentPath = window.location.pathname.split('/').pop();
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.getAttribute('href') === currentPath) {
                        link.classList.add('active');
                    }
                });

                updateCartCount(); // Ensure cart count is updated when the navbar is loaded
            });

        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-slide');
        const totalSlides = slides.length;

        document.getElementById('next').addEventListener('click', () => {
            moveToNextSlide();
        });

        document.getElementById('prev').addEventListener('click', () => {
            moveToPrevSlide();
        });

        function updateSlidePosition() {
            slides.forEach((slide, index) => {
                slide.classList.remove('active', 'prev');
                if (index === currentSlide) {
                    slide.classList.add('active');
                } else if (index === (currentSlide - 1 + totalSlides) % totalSlides) {
                    slide.classList.add('prev');
                }
            });
        }

        function moveToNextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateSlidePosition();
        }

        function moveToPrevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            updateSlidePosition();
        }

        setInterval(() => {
            moveToNextSlide();
        }, 5000);

        // Initial call to display the first slide
        updateSlidePosition();

        // Fade-out effect on scroll
        const fadeElements = document.querySelectorAll('.fade-out');
        const scrollPages = document.querySelectorAll('.scroll-page');

        window.addEventListener('scroll', () => {
            fadeElements.forEach(element => {
                const rect = element.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    element.style.opacity = 1 - Math.abs(rect.top) / window.innerHeight;
                }
            });
        });

        // Scroll snapping and automatic scroll finish
        let isScrolling;
        window.addEventListener('scroll', () => {
            window.clearTimeout(isScrolling);

            isScrolling = setTimeout(() => {
                let closestSection = null;
                let closestDistance = Infinity;

                scrollPages.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const distance = Math.abs(rect.top);
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestSection = section;
                    }
                });

                if (closestSection) {
                    closestSection.scrollIntoView({ behavior: 'smooth' });
                }
            }, 150); // Delay to detect end of scroll
        });

        // Update transparency of sections based on scroll position
        const updateVisibility = () => {
            scrollPages.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top >= window.innerHeight || rect.bottom <= 0) {
                    section.classList.add('transparent');
                } else {
                    section.classList.remove('transparent');
                }
            });
        };

        window.addEventListener('scroll', updateVisibility);
        updateVisibility(); // Initial call to set visibility
    });
</script>
</body>
</html>
